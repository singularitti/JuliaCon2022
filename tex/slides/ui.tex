\subsection{User interface}

\begin{frame}{Motivation}

    \begin{block}{What should be the most commonly-used interface}
        Since most tasks in different \ab{} calculations are routine, with only
        input parameters changed. It is desirable to make an interface that takes a few
        parameters each time.

        A command line interface plus a template file for the \ab{} software for the sciency
        fixed settings and a configuration file for the computational variables is a
        balanced choice.
    \end{block}

    \begin{block}{Command line interface}
        We want a command line interface to have

        \begin{itemize}
            \item A single topmost command (\texttt{xps})
            \item A few second-tier commands corresponding to different workflows
            \item A few third-tier commands corresponding to different tasks in a workflow
            \item A few arguments, flags, and options for each command mentioned above
        \end{itemize}
    \end{block}

\end{frame}

% [fragile] needed when the content contains juliaverbatim.
\begin{frame}[fragile]{Implementation}

    With \href{https://github.com/comonicon/Comonicon.jl}{\texttt{Comonicon.jl}}, we can implement
    an aforementioned interface easily.
    {\scriptsize
        \begin{algorithmblock}
            \begin{juliaverbatim}
module ExpressCommands
using Comonicon: @cast, @main

@cast function print(file)
    ext = lowercase(extension(file))
    if ext == "jls"
        pprint(deserialize(file))
    elseif ext == "jld2"
        pprint(JLD2.load(file))
    elseif ext in ("json", "yaml", "yml", "toml")
        data = load(file)
        pprint(data)
    else
        error("unsupported file extension `\$ext`!")
    end
end

@main
end
            \end{juliaverbatim}
        \end{algorithmblock}
    }

\end{frame}
